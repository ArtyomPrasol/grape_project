# Используем официальный образ Node.js
FROM node:18-alpine

# Устанавливаем рабочую директорию
WORKDIR /web_app

# Копируем файлы конфигурации в текущую рабочую директорию
COPY package*.json ./
COPY tsconfig*.json ./

# Устанавливаем зависимости
RUN npm install

# Копируем весь исходный код
COPY . .

# Устанавливаем переменные окружения
ENV NODE_ENV=production

# Собираем приложение (можно без проверки типов, если убрали vue-tsc)
RUN npm run build

# Открываем порт, по которому будет доступно приложение
EXPOSE 5002

# Указываем команду, если нужна (например, для запуска dev-сервера, если это SPA)
CMD ["npm", "run", "preview"]